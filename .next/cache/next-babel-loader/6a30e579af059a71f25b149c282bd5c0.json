{"ast":null,"code":"import AWS from 'aws-sdk';\nimport { AWSConfig } from '../../config/awsconfig';\nconst {\n  albumBucketName,\n  bucketRegion,\n  IdentityPoolId\n} = AWSConfig;\nconst paramKey = 'blog-oscar/images/';\nAWS.config.region = bucketRegion; // 리전\n\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: IdentityPoolId\n});\nAWS.config.update({\n  region: bucketRegion,\n  credentials: new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: IdentityPoolId\n  })\n});\nexport const addPhoto = async e => {\n  const file = e.target.files[0];\n  const upload = new AWS.S3.ManagedUpload({\n    params: {\n      Bucket: albumBucketName,\n      Key: `${paramKey}${file.name}`,\n      Body: file,\n      ACL: 'public-read'\n    }\n  });\n  const result = upload.promise();\n  const url = result.then(data => {\n    alert('사진이 등록되었습니다.');\n    return data.Location;\n  }, err => {\n    alert(`${err.message}`);\n  });\n  return url;\n};","map":null,"metadata":{},"sourceType":"module"}