{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport firebase from '../../config/init-firebase';\nexport var formatDate = function formatDate(dateData) {\n  var formatted = new Date(dateData);\n  var year = formatted.getFullYear();\n  var month = formatted.getMonth() + 1;\n  var day = formatted.getDate();\n  month = Number(month) < 10 ? \"0\".concat(month) : month;\n  day = Number(day) < 10 ? \"0\".concat(day) : day;\n  return \"\".concat(year, \"\\uB144 \").concat(month, \"\\uC6D4 \").concat(day, \"\\uC77C\");\n};\nexport var setItem = function setItem(key, obj) {\n  return sessionStorage.setItem(key, _JSON$stringify(obj));\n};\nexport var getItem = function getItem(key) {\n  return sessionStorage.getItem(JSON.parse(key));\n};\nexport var removeExp = function removeExp(str) {\n  var regExp = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi;\n\n  if (regExp.test(str)) {\n    var result = str.replace(regExp, '');\n    return result;\n  }\n\n  return str;\n};\nexport var logoutFn = function logoutFn() {\n  firebase.auth().signOut().then(function () {\n    // Sign-out successful.\n    sessionStorage.removeItem(\"idToken\");\n  })[\"catch\"](function (error) {// An error happened.\n  });\n};\nexport var setCookie = function setCookie(name, value, day) {\n  var date = new Date();\n  date.setTime(date.getTime() + day * 60 * 60 * 24 * 1000);\n  document.cookie = name + '=' + value + ';expires=' + date.toUTCString() + ';path=/';\n  console.log(document.cookie);\n};\nexport var deleteCookie = function deleteCookie(name) {\n  var date = new Date();\n  document.cookie = name + \"= \" + \"; expires=\" + date.toUTCString() + \"; path=/\";\n  console.log(\"delete\");\n};\nexport var checkUser =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var user;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return firebase.auth().currentUser;\n\n          case 2:\n            user = _context.sent;\n            return _context.abrupt(\"return\", user);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function checkUser() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var loginEmail = function loginEmail(email, password) {\n  var result = firebase.auth().signInWithEmailAndPassword(email, password).then(function (res) {\n    var token = _JSON$stringify(res.user);\n\n    setCookie(\"token\", token, 1);\n    sessionStorage.setItem(\"idToken\", token);\n    return res;\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n  return result;\n};\nexport var checkLogin = function checkLogin() {\n  var tokenObj = document.cookie;\n  var isToken = JSON.parse(tokenObj);\n  return isToken;\n};","map":{"version":3,"sources":["C:/Users/lchon/Project/blog_front/lib/Utils/utils.ts"],"names":["firebase","formatDate","dateData","formatted","Date","year","getFullYear","month","getMonth","day","getDate","Number","setItem","key","obj","sessionStorage","getItem","JSON","parse","removeExp","str","regExp","test","result","replace","logoutFn","auth","signOut","then","removeItem","error","setCookie","name","value","date","setTime","getTime","document","cookie","toUTCString","console","log","deleteCookie","checkUser","currentUser","user","loginEmail","email","password","signInWithEmailAndPassword","res","token","err","checkLogin","tokenObj","isToken"],"mappings":"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","sourcesContent":["import firebase, { provider } from '../../config/init-firebase';\r\n\r\nexport const formatDate = (dateData: string) => {\r\n  const formatted: Date = new Date(dateData);\r\n  const year: number = formatted.getFullYear();\r\n  let month: number | string = formatted.getMonth() + 1;\r\n  let day: number | string = formatted.getDate();\r\n  month = Number(month) < 10 ? `0${month}` : month;\r\n  day = Number(day) < 10 ? `0${day}` : day;\r\n\r\n  return `${year}년 ${month}월 ${day}일`;\r\n};  \r\n\r\nexport const setItem = (key: string, obj: object) => {\r\n  return sessionStorage.setItem(key, JSON.stringify(obj));\r\n};\r\n\r\nexport const getItem = (key: string) => {\r\n  return sessionStorage.getItem(JSON.parse(key));\r\n};\r\n\r\nexport const removeExp = (str: string) => {\r\n  const regExp = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi\r\n  if(regExp.test(str)) {\r\n    const result = str.replace(regExp, '');\r\n    return result;\r\n  } return str;\r\n} \r\n\r\n\r\nexport const logoutFn = () => {\r\n  firebase.auth().signOut().then(function() {\r\n    // Sign-out successful.\r\n    sessionStorage.removeItem(\"idToken\");\r\n  }).catch(function(error) {\r\n    // An error happened.\r\n  });\r\n}\r\n\r\nexport const  setCookie = (name: string, value: any, day: number) => {\r\n  const date = new Date();\r\n  date.setTime(date.getTime() + day * 60 * 60 * 24 * 1000);\r\n  document.cookie = name + '=' + value + ';expires=' + date.toUTCString() + ';path=/';\r\n  console.log(document.cookie);\r\n};\r\n\r\nexport const deleteCookie = (name: string) => {\r\n  const date = new Date();\r\n  document.cookie = name + \"= \" + \"; expires=\" + date.toUTCString() + \"; path=/\";\r\n  console.log(\"delete\");\r\n}\r\n\r\nexport const checkUser = async () => {\r\n  const user = await firebase.auth().currentUser;\r\n  return user;\r\n}\r\n\r\nexport const loginEmail = (email: string, password: string) => {\r\n  const result = firebase.auth()\r\n    .signInWithEmailAndPassword(email, password)\r\n    .then((res) => {\r\n      const token = JSON.stringify(res.user);\r\n      setCookie(\"token\", token, 1);\r\n      sessionStorage.setItem(\"idToken\", token);\r\n      return res\r\n  }).catch(err =>  console.log(err));\r\n  return result;\r\n}\r\n\r\n\r\n\r\nexport const checkLogin = () => {\r\n  const tokenObj = document.cookie;\r\n  const isToken = JSON.parse(tokenObj)\r\n  return isToken;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}