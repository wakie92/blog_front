{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport firebase from '../../config/init-firebase';\nexport var formatDate = function formatDate(dateData) {\n  var formatted = new Date(dateData);\n  var year = formatted.getFullYear();\n  var month = formatted.getMonth() + 1;\n  var day = formatted.getDate();\n  month = Number(month) < 10 ? \"0\".concat(month) : month;\n  day = Number(day) < 10 ? \"0\".concat(day) : day;\n  return \"\".concat(year, \"\\uB144 \").concat(month, \"\\uC6D4 \").concat(day, \"\\uC77C\");\n};\nexport var setItem = function setItem(key, obj) {\n  return sessionStorage.setItem(key, _JSON$stringify(obj));\n};\nexport var getItem = function getItem(key) {\n  return sessionStorage.getItem(JSON.parse(key));\n};\nexport var removeExp = function removeExp(str) {\n  var regExp = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi;\n\n  if (regExp.test(str)) {\n    var result = str.replace(regExp, '');\n    return result;\n  }\n\n  return str;\n};\nexport var logoutFn = function logoutFn() {\n  firebase.auth().signOut().then(function () {\n    // Sign-out successful.\n    sessionStorage.removeItem(\"idToken\");\n  })[\"catch\"](function (error) {// An error happened.\n  });\n};\nexport var setCookie = function setCookie(name, value, day) {\n  var date = new Date();\n  date.setTime(date.getTime() + day * 60 * 60 * 24 * 1000);\n  document.cookie = name + '=' + value + ';expires=' + date.toUTCString() + ';path=/';\n  console.log(document.cookie);\n};\nexport var deleteCookie = function deleteCookie(name) {\n  var date = new Date();\n  document.cookie = name + \"= \" + \"; expires=\" + date.toUTCString() + \"; path=/\";\n  console.log(\"delete\");\n};\nexport var checkUser =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var user;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return firebase.auth().currentUser;\n\n          case 2:\n            user = _context.sent;\n            return _context.abrupt(\"return\", user);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function checkUser() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var loginEmail = function loginEmail(email, password) {\n  var result = firebase.auth().signInWithEmailAndPassword(email, password).then(function (res) {\n    var token = _JSON$stringify(res.user);\n\n    setCookie(\"token\", token, 1);\n    sessionStorage.setItem(\"idToken\", token);\n    return res;\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n  return result;\n};\nexport var checkLogin = function checkLogin() {\n  var tokenObj = document.cookie;\n  var isToken = JSON.parse(tokenObj);\n  return isToken;\n};","map":{"version":3,"sources":["C:/Users/lchon/Project/blog_front/lib/Utils/utils.ts"],"names":["formatDate","formatted","year","month","day","Number","setItem","sessionStorage","getItem","JSON","removeExp","regExp","result","str","logoutFn","firebase","setCookie","date","document","name","console","deleteCookie","checkUser","user","loginEmail","token","res","checkLogin","tokenObj","isToken"],"mappings":"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","sourcesContent":["import firebase, { provider } from '../../config/init-firebase';\r\n\r\nexport const formatDate = (dateData: string) => {\r\n  const formatted: Date = new Date(dateData);\r\n  const year: number = formatted.getFullYear();\r\n  let month: number | string = formatted.getMonth() + 1;\r\n  let day: number | string = formatted.getDate();\r\n  month = Number(month) < 10 ? `0${month}` : month;\r\n  day = Number(day) < 10 ? `0${day}` : day;\r\n\r\n  return `${year}년 ${month}월 ${day}일`;\r\n};  \r\n\r\nexport const setItem = (key: string, obj: object) => {\r\n  return sessionStorage.setItem(key, JSON.stringify(obj));\r\n};\r\n\r\nexport const getItem = (key: string) => {\r\n  return sessionStorage.getItem(JSON.parse(key));\r\n};\r\n\r\nexport const removeExp = (str: string) => {\r\n  const regExp = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi\r\n  if(regExp.test(str)) {\r\n    const result = str.replace(regExp, '');\r\n    return result;\r\n  } return str;\r\n} \r\n\r\n\r\nexport const logoutFn = () => {\r\n  firebase.auth().signOut().then(function() {\r\n    // Sign-out successful.\r\n    sessionStorage.removeItem(\"idToken\");\r\n  }).catch(function(error) {\r\n    // An error happened.\r\n  });\r\n}\r\n\r\nexport const  setCookie = (name: string, value: any, day: number) => {\r\n  const date = new Date();\r\n  date.setTime(date.getTime() + day * 60 * 60 * 24 * 1000);\r\n  document.cookie = name + '=' + value + ';expires=' + date.toUTCString() + ';path=/';\r\n  console.log(document.cookie);\r\n};\r\n\r\nexport const deleteCookie = (name: string) => {\r\n  const date = new Date();\r\n  document.cookie = name + \"= \" + \"; expires=\" + date.toUTCString() + \"; path=/\";\r\n  console.log(\"delete\");\r\n}\r\n\r\nexport const checkUser = async () => {\r\n  const user = await firebase.auth().currentUser;\r\n  return user;\r\n}\r\n\r\nexport const loginEmail = (email: string, password: string) => {\r\n  const result = firebase.auth()\r\n    .signInWithEmailAndPassword(email, password)\r\n    .then((res) => {\r\n      const token = JSON.stringify(res.user);\r\n      setCookie(\"token\", token, 1);\r\n      sessionStorage.setItem(\"idToken\", token);\r\n      return res\r\n  }).catch(err =>  console.log(err));\r\n  return result;\r\n}\r\n\r\n\r\n\r\nexport const checkLogin = () => {\r\n  const tokenObj = document.cookie;\r\n  const isToken = JSON.parse(tokenObj)\r\n  return isToken;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}