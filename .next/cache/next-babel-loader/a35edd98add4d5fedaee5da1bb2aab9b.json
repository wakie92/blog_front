{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getType } from 'typesafe-actions';\nexport const asyncState = {\n  initial: initialData => ({\n    loading: false,\n    data: initialData || null,\n    error: null\n  }),\n  loading: data => ({\n    loading: true,\n    data: data || null,\n    error: null\n  }),\n  success: data => ({\n    loading: false,\n    data,\n    error: null\n  }),\n  error: error => ({\n    loading: false,\n    data: null,\n    error: error\n  })\n};\nexport function transformToArray(asyncActionCreator) {\n  const {\n    request,\n    success,\n    failure\n  } = asyncActionCreator;\n  return [request, success, failure];\n}\nexport const handleAsyncActions = (type, key) => {\n  return (state, action) => {\n    const [request, success, failure] = transformToArray(type).map(getType);\n\n    switch (action.type) {\n      case request:\n        return _objectSpread({}, state, {\n          [key]: asyncState.loading()\n        });\n\n      case success:\n        return _objectSpread({}, state, {\n          [key]: asyncState.success(action.payload)\n        });\n\n      case failure:\n        return _objectSpread({}, state, {\n          [key]: asyncState.error(action.payload)\n        });\n\n      default:\n        return state;\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/lchon/Project/blog_front/lib/Utils/asyncUtils.ts"],"names":["getType","asyncState","initial","initialData","loading","data","error","success","transformToArray","asyncActionCreator","request","failure","handleAsyncActions","type","key","state","action","map","payload"],"mappings":";;;;;;;;;;;;AACA,SAASA,OAAT,QAAmD,kBAAnD;AAMA,OAAO,MAAMC,UAAU,GAAG;AACxBC,EAAAA,OAAO,EAAeC,WAAb,KAAoD;AAC3DC,IAAAA,OAAO,EAAE,KADkD;AAE3DC,IAAAA,IAAI,EAAEF,WAAW,IAAI,IAFsC;AAG3DG,IAAAA,KAAK,EAAE;AAHoD,GAApD,CADe;AAMxBF,EAAAA,OAAO,EAAeC,IAAb,KAA6C;AACpDD,IAAAA,OAAO,EAAE,IAD2C;AAEpDC,IAAAA,IAAI,EAAEA,IAAI,IAAI,IAFsC;AAGpDC,IAAAA,KAAK,EAAE;AAH6C,GAA7C,CANe;AAWxBC,EAAAA,OAAO,EAAeF,IAAb,KAA4C;AACnDD,IAAAA,OAAO,EAAE,KAD0C;AAEnDC,IAAAA,IAFmD;AAGnDC,IAAAA,KAAK,EAAE;AAH4C,GAA5C,CAXe;AAgBxBA,EAAAA,KAAK,EAASA,KAAP,KAAuC;AAC5CF,IAAAA,OAAO,EAAE,KADmC;AAE5CC,IAAAA,IAAI,EAAE,IAFsC;AAG5CC,IAAAA,KAAK,EAAEA;AAHqC,GAAvC;AAhBiB,CAAnB;AAwBP,OAAO,SAASE,gBAAT,CACLC,kBADK,EAEL;AACA,QAAM;AAAEC,IAAAA,OAAF;AAAWH,IAAAA,OAAX;AAAoBI,IAAAA;AAApB,MAAgCF,kBAAtC;AACA,SAAO,CAACC,OAAD,EAAUH,OAAV,EAAmBI,OAAnB,CAAP;AACD;AAED,OAAO,MAAMC,kBAAkB,GAAG,CAChCC,IADgC,EAEhCC,GAFgC,KAG3B;AACL,SAAO,CAACC,KAAD,EAAWC,MAAX,KAAiC;AACtC,UAAM,CAACN,OAAD,EAAUH,OAAV,EAAmBI,OAAnB,IAA8BH,gBAAgB,CAACK,IAAD,CAAhB,CAAuBI,GAAvB,CAA2BjB,OAA3B,CAApC;;AACA,YAAQgB,MAAM,CAACH,IAAf;AACE,WAAKH,OAAL;AACE,iCACKK,KADL;AAEE,WAACD,GAAD,GAAOb,UAAU,CAACG,OAAX;AAFT;;AAIF,WAAKG,OAAL;AACE,iCACKQ,KADL;AAEE,WAACD,GAAD,GAAOb,UAAU,CAACM,OAAX,CAAmBS,MAAM,CAACE,OAA1B;AAFT;;AAIF,WAAKP,OAAL;AACE,iCACKI,KADL;AAEE,WAACD,GAAD,GAAOb,UAAU,CAACK,KAAX,CAAiBU,MAAM,CAACE,OAAxB;AAFT;;AAIF;AACE,eAAOH,KAAP;AAjBJ;AAmBD,GArBD;AAsBD,CA1BM","sourcesContent":["import { AnyAction } from 'redux';\r\nimport { getType, AsyncActionCreatorBuilder } from 'typesafe-actions';\r\nexport type AsyncState<T, E = any> = {\r\n  data: T | null;\r\n  loading: boolean;\r\n  error: E | null;\r\n};\r\nexport const asyncState = {\r\n  initial: <T, E = any>(initialData?: T): AsyncState<T, E> => ({\r\n    loading: false,\r\n    data: initialData || null,\r\n    error: null,\r\n  }),\r\n  loading: <T, E = any>(data?: T): AsyncState<T, E> => ({\r\n    loading: true,\r\n    data: data || null,\r\n    error: null\r\n  }),\r\n  success: <T, E = any>(data: T): AsyncState<T, E> => ({\r\n    loading: false,\r\n    data,\r\n    error: null\r\n  }),\r\n  error: <T, E>(error: E): AsyncState<T, E> => ({\r\n    loading: false,\r\n    data: null,\r\n    error: error\r\n  })\r\n};\r\n\r\ntype AnyAsyncActionCreator = AsyncActionCreatorBuilder<any, any, any>;\r\nexport function transformToArray<AC extends AnyAsyncActionCreator>(\r\n  asyncActionCreator: AC,\r\n) {\r\n  const { request, success, failure } = asyncActionCreator;\r\n  return [request, success, failure];\r\n}\r\n\r\nexport const handleAsyncActions = <S, AC extends AnyAsyncActionCreator, K extends keyof S>(\r\n  type: AC,\r\n  key: K\r\n  ) => {\r\n  return (state: S, action: AnyAction) => {\r\n    const [request, success, failure] = transformToArray(type).map(getType);\r\n    switch (action.type) {\r\n      case request:\r\n        return {\r\n          ...state,\r\n          [key]: asyncState.loading(),\r\n        };\r\n      case success:\r\n        return {\r\n          ...state,\r\n          [key]: asyncState.success(action.payload),\r\n        };\r\n      case failure:\r\n        return {\r\n          ...state,\r\n          [key]: asyncState.error(action.payload),\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}