{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getType } from 'typesafe-actions';\nexport var asyncState = {\n  initial: function initial(initialData) {\n    return {\n      loading: false,\n      data: initialData || null,\n      error: null\n    };\n  },\n  loading: function loading(data) {\n    return {\n      loading: true,\n      data: data || null,\n      error: null\n    };\n  },\n  success: function success(data) {\n    return {\n      loading: false,\n      data: data,\n      error: null\n    };\n  },\n  error: function error(_error) {\n    return {\n      loading: false,\n      data: null,\n      error: _error\n    };\n  }\n};\nexport function transformToArray(asyncActionCreator) {\n  var request = asyncActionCreator.request,\n      success = asyncActionCreator.success,\n      failure = asyncActionCreator.failure;\n  return [request, success, failure];\n}\nexport var handleAsyncActions = function handleAsyncActions(type, key) {\n  return function (state, action) {\n    var _transformToArray$map = transformToArray(type).map(getType),\n        _transformToArray$map2 = _slicedToArray(_transformToArray$map, 3),\n        request = _transformToArray$map2[0],\n        success = _transformToArray$map2[1],\n        failure = _transformToArray$map2[2];\n\n    switch (action.type) {\n      case request:\n        return _objectSpread({}, state, _defineProperty({}, key, asyncState.loading()));\n\n      case success:\n        return _objectSpread({}, state, _defineProperty({}, key, asyncState.success(action.payload)));\n\n      case failure:\n        return _objectSpread({}, state, _defineProperty({}, key, asyncState.error(action.payload)));\n\n      default:\n        return state;\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/lchon/Project/blog_front/lib/Utils/asyncUtils.ts"],"names":["getType","asyncState","initial","initialData","loading","data","error","success","transformToArray","asyncActionCreator","request","failure","handleAsyncActions","type","key","state","action","map","payload"],"mappings":";;;;;;;;;;;;;AACA,SAASA,OAAT,QAAmD,kBAAnD;AAMA,OAAO,IAAMC,UAAU,GAAG;AACxBC,EAAAA,OAAO,EAAE,iBAAaC,WAAb;AAAA,WAAoD;AAC3DC,MAAAA,OAAO,EAAE,KADkD;AAE3DC,MAAAA,IAAI,EAAEF,WAAW,IAAI,IAFsC;AAG3DG,MAAAA,KAAK,EAAE;AAHoD,KAApD;AAAA,GADe;AAMxBF,EAAAA,OAAO,EAAE,iBAAaC,IAAb;AAAA,WAA6C;AACpDD,MAAAA,OAAO,EAAE,IAD2C;AAEpDC,MAAAA,IAAI,EAAEA,IAAI,IAAI,IAFsC;AAGpDC,MAAAA,KAAK,EAAE;AAH6C,KAA7C;AAAA,GANe;AAWxBC,EAAAA,OAAO,EAAE,iBAAaF,IAAb;AAAA,WAA4C;AACnDD,MAAAA,OAAO,EAAE,KAD0C;AAEnDC,MAAAA,IAAI,EAAJA,IAFmD;AAGnDC,MAAAA,KAAK,EAAE;AAH4C,KAA5C;AAAA,GAXe;AAgBxBA,EAAAA,KAAK,EAAE,eAAOA,MAAP;AAAA,WAAuC;AAC5CF,MAAAA,OAAO,EAAE,KADmC;AAE5CC,MAAAA,IAAI,EAAE,IAFsC;AAG5CC,MAAAA,KAAK,EAAEA;AAHqC,KAAvC;AAAA;AAhBiB,CAAnB;AAwBP,OAAO,SAASE,gBAAT,CACLC,kBADK,EAEL;AAAA,MACQC,OADR,GACsCD,kBADtC,CACQC,OADR;AAAA,MACiBH,OADjB,GACsCE,kBADtC,CACiBF,OADjB;AAAA,MAC0BI,OAD1B,GACsCF,kBADtC,CAC0BE,OAD1B;AAEA,SAAO,CAACD,OAAD,EAAUH,OAAV,EAAmBI,OAAnB,CAAP;AACD;AAED,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAChCC,IADgC,EAEhCC,GAFgC,EAG3B;AACL,SAAO,UAACC,KAAD,EAAWC,MAAX,EAAiC;AAAA,gCACFR,gBAAgB,CAACK,IAAD,CAAhB,CAAuBI,GAAvB,CAA2BjB,OAA3B,CADE;AAAA;AAAA,QAC/BU,OAD+B;AAAA,QACtBH,OADsB;AAAA,QACbI,OADa;;AAEtC,YAAQK,MAAM,CAACH,IAAf;AACE,WAAKH,OAAL;AACE,iCACKK,KADL,sBAEGD,GAFH,EAESb,UAAU,CAACG,OAAX,EAFT;;AAIF,WAAKG,OAAL;AACE,iCACKQ,KADL,sBAEGD,GAFH,EAESb,UAAU,CAACM,OAAX,CAAmBS,MAAM,CAACE,OAA1B,CAFT;;AAIF,WAAKP,OAAL;AACE,iCACKI,KADL,sBAEGD,GAFH,EAESb,UAAU,CAACK,KAAX,CAAiBU,MAAM,CAACE,OAAxB,CAFT;;AAIF;AACE,eAAOH,KAAP;AAjBJ;AAmBD,GArBD;AAsBD,CA1BM","sourcesContent":["import { AnyAction } from 'redux';\r\nimport { getType, AsyncActionCreatorBuilder } from 'typesafe-actions';\r\nexport type AsyncState<T, E = any> = {\r\n  data: T | null;\r\n  loading: boolean;\r\n  error: E | null;\r\n};\r\nexport const asyncState = {\r\n  initial: <T, E = any>(initialData?: T): AsyncState<T, E> => ({\r\n    loading: false,\r\n    data: initialData || null,\r\n    error: null,\r\n  }),\r\n  loading: <T, E = any>(data?: T): AsyncState<T, E> => ({\r\n    loading: true,\r\n    data: data || null,\r\n    error: null\r\n  }),\r\n  success: <T, E = any>(data: T): AsyncState<T, E> => ({\r\n    loading: false,\r\n    data,\r\n    error: null\r\n  }),\r\n  error: <T, E>(error: E): AsyncState<T, E> => ({\r\n    loading: false,\r\n    data: null,\r\n    error: error\r\n  })\r\n};\r\n\r\ntype AnyAsyncActionCreator = AsyncActionCreatorBuilder<any, any, any>;\r\nexport function transformToArray<AC extends AnyAsyncActionCreator>(\r\n  asyncActionCreator: AC,\r\n) {\r\n  const { request, success, failure } = asyncActionCreator;\r\n  return [request, success, failure];\r\n}\r\n\r\nexport const handleAsyncActions = <S, AC extends AnyAsyncActionCreator, K extends keyof S>(\r\n  type: AC,\r\n  key: K\r\n  ) => {\r\n  return (state: S, action: AnyAction) => {\r\n    const [request, success, failure] = transformToArray(type).map(getType);\r\n    switch (action.type) {\r\n      case request:\r\n        return {\r\n          ...state,\r\n          [key]: asyncState.loading(),\r\n        };\r\n      case success:\r\n        return {\r\n          ...state,\r\n          [key]: asyncState.success(action.payload),\r\n        };\r\n      case failure:\r\n        return {\r\n          ...state,\r\n          [key]: asyncState.error(action.payload),\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}